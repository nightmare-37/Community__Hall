{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\Community-Hall2\\\\client\\\\src\\\\Components\\\\Admin\\\\DeleteBooking.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AuthContext } from '../../Context/auth-context';\nimport DeleteDetail from './DeleteDetail';\nimport \"./DeleteDetail.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction DeleteBooking() {\n  _s();\n\n  const auth = useContext(AuthContext);\n  const history = useHistory();\n  const [formDetails, setFormDetails] = useState([]);\n  useEffect(() => {\n    const getAllDetails = async () => {\n      try {\n        const response = await fetch(\"http://localhost:5000/api/bookings/bookingdetail\");\n        const responseData = await response.json();\n\n        if (!response.ok) {\n          throw new Error(responseData.message);\n        } else {\n          setFormDetails(responseData.bookingDetail);\n          console.log(responseData.bookingDetail);\n        }\n      } catch (err) {\n        console.log(err.message);\n      }\n    };\n\n    getAllDetails();\n  }, [formDetails]);\n\n  const deleteBooking = async id => {\n    try {\n      const response = await fetch(\"http://localhost:5000/api/bookings/deletebooking\", {\n        method: \"DELETE\",\n        body: JSON.stringify({\n          id: id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const responseData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(responseData.message);\n      }\n\n      setFormDetails(prevValue => {\n        return prevValue.filter(items => {\n          return items.id != id;\n        });\n      });\n      console.log(formDetails);\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  const logoutHandler = event => {\n    history.push(\"/\");\n    auth.logout();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home1\",\n      style: {\n        width: \"90%\",\n        margin: \"0 auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          border: \"none\",\n          backgroundColor: \"#004975\",\n          color: \"#fff\",\n          float: \"left\",\n          height: \"100%\"\n        },\n        onClick: logoutHandler,\n        children: \"Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          border: \"none\",\n          backgroundColor: \"#004975\",\n          color: \"#fff\",\n          float: \"right\",\n          height: \"100%\"\n        },\n        onClick: logoutHandler,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"90%\",\n        margin: \"0 auto\"\n      },\n      children: formDetails.map((detail, index) => {\n        return /*#__PURE__*/_jsxDEV(DeleteDetail, {\n          name: detail.name,\n          id: detail.id,\n          startDate: detail.startDate,\n          endDate: detail.endDate,\n          floor: detail.floor,\n          onDelete: deleteBooking\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 20\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s(DeleteBooking, \"8k0Gpvku5V/44DdibbqoTJ92edI=\", false, function () {\n  return [useHistory];\n});\n\n_c = DeleteBooking;\nexport default DeleteBooking;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteBooking\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useHistory","AuthContext","DeleteDetail","DeleteBooking","auth","history","formDetails","setFormDetails","getAllDetails","response","fetch","responseData","json","ok","Error","message","bookingDetail","console","log","err","deleteBooking","id","method","body","JSON","stringify","headers","prevValue","filter","items","logoutHandler","event","push","logout","width","margin","border","backgroundColor","color","float","height","map","detail","index","name","startDate","endDate","floor"],"sources":["D:/react/Community-Hall2/client/src/Components/Admin/DeleteBooking.js"],"sourcesContent":["import React,{useEffect,useState,useContext} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { AuthContext } from '../../Context/auth-context';\r\nimport DeleteDetail from './DeleteDetail';\r\n\r\nimport \"./DeleteDetail.css\";\r\n\r\nfunction DeleteBooking() {\r\n\r\n    const auth=useContext(AuthContext);\r\n    const history=useHistory();\r\n    const [formDetails,setFormDetails]=useState([]);\r\n     \r\n    useEffect(()=>{\r\n            const getAllDetails=async()=>{\r\n                try{\r\n                    const response=await fetch(\"http://localhost:5000/api/bookings/bookingdetail\");\r\n                    const responseData = await response.json();\r\n                    if (!response.ok) {\r\n                        throw new Error(responseData.message);\r\n                      }\r\n                      else {\r\n                        setFormDetails(responseData.bookingDetail);\r\n                        console.log(responseData.bookingDetail);\r\n                      }\r\n                }catch(err){\r\n                    console.log(err.message);\r\n                }\r\n            };\r\n\r\n            getAllDetails();\r\n\r\n\r\n    },[formDetails]);\r\n\r\n    const deleteBooking=async(id)=>{\r\n      try{\r\n        const response=await fetch(\"http://localhost:5000/api/bookings/deletebooking\",{\r\n            method: \"DELETE\",\r\n            body: JSON.stringify({\r\n                 id: id\r\n              }),\r\n              headers: {\r\n                'Content-Type': 'application/json'\r\n              }\r\n        });\r\n        const responseData = await response.json();\r\n\r\n        \r\n        if (!response.ok) {\r\n            throw new Error(responseData.message);\r\n          }\r\n\r\n          setFormDetails(prevValue => {\r\n            return prevValue.filter((items) => {\r\n                return items.id!=id;\r\n              });\r\n              \r\n          });\r\n\r\n          console.log(formDetails);\r\n\r\n          \r\n    }catch(err){\r\n        console.log(err.message);\r\n    }\r\n    }  \r\n    \r\n    const logoutHandler=(event)=>{\r\n      history.push(\"/\");\r\n      auth.logout();\r\n  }\r\n  return (\r\n    <>\r\n    <div className=\"home1\" style={{ width: \"90%\", margin: \"0 auto\"}}>\r\n    <button style={{border: \"none\", backgroundColor: \"#004975\" ,color: \"#fff\",float: \"left\",height: \"100%\"}} onClick={logoutHandler}>Home</button>\r\n        <button style={{border: \"none\", backgroundColor: \"#004975\" ,color: \"#fff\",float: \"right\",height: \"100%\"}} onClick={logoutHandler}>Logout</button>\r\n    </div>\r\n    <div style={{width: \"90%\", margin: \"0 auto\"}}>\r\n        { formDetails.map((detail,index)=>{\r\n            return <DeleteDetail key={index} name={detail.name} id={detail.id} startDate={detail.startDate} endDate={detail.endDate} floor={detail.floor} onDelete={deleteBooking} />;\r\n        }) }\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default DeleteBooking;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,EAAiCC,UAAjC,QAAkD,OAAlD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,OAAO,oBAAP;;;;AAEA,SAASC,aAAT,GAAyB;EAAA;;EAErB,MAAMC,IAAI,GAACL,UAAU,CAACE,WAAD,CAArB;EACA,MAAMI,OAAO,GAACL,UAAU,EAAxB;EACA,MAAM,CAACM,WAAD,EAAaC,cAAb,IAA6BT,QAAQ,CAAC,EAAD,CAA3C;EAEAD,SAAS,CAAC,MAAI;IACN,MAAMW,aAAa,GAAC,YAAS;MACzB,IAAG;QACC,MAAMC,QAAQ,GAAC,MAAMC,KAAK,CAAC,kDAAD,CAA1B;QACA,MAAMC,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA3B;;QACA,IAAI,CAACH,QAAQ,CAACI,EAAd,EAAkB;UACd,MAAM,IAAIC,KAAJ,CAAUH,YAAY,CAACI,OAAvB,CAAN;QACD,CAFH,MAGO;UACHR,cAAc,CAACI,YAAY,CAACK,aAAd,CAAd;UACAC,OAAO,CAACC,GAAR,CAAYP,YAAY,CAACK,aAAzB;QACD;MACN,CAVD,CAUC,OAAMG,GAAN,EAAU;QACPF,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACJ,OAAhB;MACH;IACJ,CAdD;;IAgBAP,aAAa;EAGpB,CApBQ,EAoBP,CAACF,WAAD,CApBO,CAAT;;EAsBA,MAAMc,aAAa,GAAC,MAAMC,EAAN,IAAW;IAC7B,IAAG;MACD,MAAMZ,QAAQ,GAAC,MAAMC,KAAK,CAAC,kDAAD,EAAoD;QAC1EY,MAAM,EAAE,QADkE;QAE1EC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UAChBJ,EAAE,EAAEA;QADY,CAAf,CAFoE;QAKxEK,OAAO,EAAE;UACP,gBAAgB;QADT;MAL+D,CAApD,CAA1B;MASA,MAAMf,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA3B;;MAGA,IAAI,CAACH,QAAQ,CAACI,EAAd,EAAkB;QACd,MAAM,IAAIC,KAAJ,CAAUH,YAAY,CAACI,OAAvB,CAAN;MACD;;MAEDR,cAAc,CAACoB,SAAS,IAAI;QAC1B,OAAOA,SAAS,CAACC,MAAV,CAAkBC,KAAD,IAAW;UAC/B,OAAOA,KAAK,CAACR,EAAN,IAAUA,EAAjB;QACD,CAFI,CAAP;MAID,CALa,CAAd;MAOAJ,OAAO,CAACC,GAAR,CAAYZ,WAAZ;IAGL,CA3BC,CA2BD,OAAMa,GAAN,EAAU;MACPF,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACJ,OAAhB;IACH;EACA,CA/BD;;EAiCA,MAAMe,aAAa,GAAEC,KAAD,IAAS;IAC3B1B,OAAO,CAAC2B,IAAR,CAAa,GAAb;IACA5B,IAAI,CAAC6B,MAAL;EACH,CAHC;;EAIF,oBACE;IAAA,wBACA;MAAK,SAAS,EAAC,OAAf;MAAuB,KAAK,EAAE;QAAEC,KAAK,EAAE,KAAT;QAAgBC,MAAM,EAAE;MAAxB,CAA9B;MAAA,wBACA;QAAQ,KAAK,EAAE;UAACC,MAAM,EAAE,MAAT;UAAiBC,eAAe,EAAE,SAAlC;UAA6CC,KAAK,EAAE,MAApD;UAA2DC,KAAK,EAAE,MAAlE;UAAyEC,MAAM,EAAE;QAAjF,CAAf;QAAyG,OAAO,EAAEV,aAAlH;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADA,eAEI;QAAQ,KAAK,EAAE;UAACM,MAAM,EAAE,MAAT;UAAiBC,eAAe,EAAE,SAAlC;UAA6CC,KAAK,EAAE,MAApD;UAA2DC,KAAK,EAAE,OAAlE;UAA0EC,MAAM,EAAE;QAAlF,CAAf;QAA0G,OAAO,EAAEV,aAAnH;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAFJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADA,eAKA;MAAK,KAAK,EAAE;QAACI,KAAK,EAAE,KAAR;QAAeC,MAAM,EAAE;MAAvB,CAAZ;MAAA,UACM7B,WAAW,CAACmC,GAAZ,CAAgB,CAACC,MAAD,EAAQC,KAAR,KAAgB;QAC9B,oBAAO,QAAC,YAAD;UAA0B,IAAI,EAAED,MAAM,CAACE,IAAvC;UAA6C,EAAE,EAAEF,MAAM,CAACrB,EAAxD;UAA4D,SAAS,EAAEqB,MAAM,CAACG,SAA9E;UAAyF,OAAO,EAAEH,MAAM,CAACI,OAAzG;UAAkH,KAAK,EAAEJ,MAAM,CAACK,KAAhI;UAAuI,QAAQ,EAAE3B;QAAjJ,GAAmBuB,KAAnB;UAAA;UAAA;UAAA;QAAA,QAAP;MACH,CAFC;IADN;MAAA;MAAA;MAAA;IAAA,QALA;EAAA,gBADF;AAaD;;GA9EQxC,a;UAGSH,U;;;KAHTG,a;AAgFT,eAAeA,aAAf"},"metadata":{},"sourceType":"module"}
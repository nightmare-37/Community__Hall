{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\Community-Hall2\\\\client\\\\src\\\\Components\\\\Admin\\\\DeleteBooking.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport DeleteDetail from './DeleteDetail';\nimport \"./DeleteDetail.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction DeleteBooking() {\n  _s();\n\n  const [formDetails, setFormDetails] = useState([]);\n  useEffect(() => {\n    const getAllDetails = async () => {\n      try {\n        const response = await fetch(\"http://localhost:5000/api/bookings/bookingdetail\");\n        const responseData = await response.json();\n\n        if (!response.ok) {\n          throw new Error(responseData.message);\n        } else {\n          setFormDetails(responseData.bookingDetail);\n          console.log(responseData.bookingDetail);\n        }\n      } catch (err) {\n        console.log(err.message);\n      }\n    };\n\n    getAllDetails();\n  }, [responseData]);\n\n  const deleteBooking = async id => {\n    try {\n      const response = await fetch(\"http://localhost:5000/api/bookings/deletebooking\", {\n        method: \"DELETE\",\n        body: JSON.stringify({\n          id: id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const responseData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(responseData.message);\n      }\n\n      setFormDetails(prevValue => {\n        return prevValue.filter(items => {\n          return items.id != id;\n        });\n      });\n      console.log(formDetails);\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"90%\",\n      margin: \"0 auto\"\n    },\n    children: formDetails.map((detail, index) => {\n      return /*#__PURE__*/_jsxDEV(DeleteDetail, {\n        name: detail.name,\n        id: detail.id,\n        startDate: detail.startdate,\n        endDate: detail.endDate,\n        floor: detail.floor,\n        onDelete: deleteBooking\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 20\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DeleteBooking, \"dHTUPMlUNNA6XnU9ywFnuqWFJ44=\");\n\n_c = DeleteBooking;\nexport default DeleteBooking;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteBooking\");","map":{"version":3,"names":["React","useEffect","useState","useHistory","DeleteDetail","DeleteBooking","formDetails","setFormDetails","getAllDetails","response","fetch","responseData","json","ok","Error","message","bookingDetail","console","log","err","deleteBooking","id","method","body","JSON","stringify","headers","prevValue","filter","items","width","margin","map","detail","index","name","startdate","endDate","floor"],"sources":["D:/react/Community-Hall2/client/src/Components/Admin/DeleteBooking.js"],"sourcesContent":["import React,{useEffect,useState} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport DeleteDetail from './DeleteDetail';\r\n\r\nimport \"./DeleteDetail.css\";\r\n\r\nfunction DeleteBooking() {\r\n\r\n    const [formDetails,setFormDetails]=useState([]);\r\n     \r\n    useEffect(()=>{\r\n            const getAllDetails=async()=>{\r\n                try{\r\n                    const response=await fetch(\"http://localhost:5000/api/bookings/bookingdetail\");\r\n                    const responseData = await response.json();\r\n                    if (!response.ok) {\r\n                        throw new Error(responseData.message);\r\n                      }\r\n                      else {\r\n                        setFormDetails(responseData.bookingDetail);\r\n                        console.log(responseData.bookingDetail);\r\n                      }\r\n                }catch(err){\r\n                    console.log(err.message);\r\n                }\r\n            };\r\n\r\n            getAllDetails();\r\n\r\n\r\n    },[responseData]);\r\n\r\n    const deleteBooking=async(id)=>{\r\n      try{\r\n        const response=await fetch(\"http://localhost:5000/api/bookings/deletebooking\",{\r\n            method: \"DELETE\",\r\n            body: JSON.stringify({\r\n                 id: id\r\n              }),\r\n              headers: {\r\n                'Content-Type': 'application/json'\r\n              }\r\n        });\r\n        const responseData = await response.json();\r\n\r\n        \r\n        if (!response.ok) {\r\n            throw new Error(responseData.message);\r\n          }\r\n\r\n          setFormDetails(prevValue => {\r\n            return prevValue.filter((items) => {\r\n                return items.id!=id;\r\n              });\r\n              \r\n          });\r\n\r\n          console.log(formDetails);\r\n\r\n          \r\n    }catch(err){\r\n        console.log(err.message);\r\n    }\r\n    }  \r\n\r\n  return (\r\n    <div style={{width: \"90%\", margin: \"0 auto\"}}>\r\n        { formDetails.map((detail,index)=>{\r\n            return <DeleteDetail key={index} name={detail.name} id={detail.id} startDate={detail.startdate} endDate={detail.endDate} floor={detail.floor} onDelete={deleteBooking} />;\r\n        }) }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DeleteBooking;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,OAAO,oBAAP;;;AAEA,SAASC,aAAT,GAAyB;EAAA;;EAErB,MAAM,CAACC,WAAD,EAAaC,cAAb,IAA6BL,QAAQ,CAAC,EAAD,CAA3C;EAEAD,SAAS,CAAC,MAAI;IACN,MAAMO,aAAa,GAAC,YAAS;MACzB,IAAG;QACC,MAAMC,QAAQ,GAAC,MAAMC,KAAK,CAAC,kDAAD,CAA1B;QACA,MAAMC,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA3B;;QACA,IAAI,CAACH,QAAQ,CAACI,EAAd,EAAkB;UACd,MAAM,IAAIC,KAAJ,CAAUH,YAAY,CAACI,OAAvB,CAAN;QACD,CAFH,MAGO;UACHR,cAAc,CAACI,YAAY,CAACK,aAAd,CAAd;UACAC,OAAO,CAACC,GAAR,CAAYP,YAAY,CAACK,aAAzB;QACD;MACN,CAVD,CAUC,OAAMG,GAAN,EAAU;QACPF,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACJ,OAAhB;MACH;IACJ,CAdD;;IAgBAP,aAAa;EAGpB,CApBQ,EAoBP,CAACG,YAAD,CApBO,CAAT;;EAsBA,MAAMS,aAAa,GAAC,MAAMC,EAAN,IAAW;IAC7B,IAAG;MACD,MAAMZ,QAAQ,GAAC,MAAMC,KAAK,CAAC,kDAAD,EAAoD;QAC1EY,MAAM,EAAE,QADkE;QAE1EC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UAChBJ,EAAE,EAAEA;QADY,CAAf,CAFoE;QAKxEK,OAAO,EAAE;UACP,gBAAgB;QADT;MAL+D,CAApD,CAA1B;MASA,MAAMf,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA3B;;MAGA,IAAI,CAACH,QAAQ,CAACI,EAAd,EAAkB;QACd,MAAM,IAAIC,KAAJ,CAAUH,YAAY,CAACI,OAAvB,CAAN;MACD;;MAEDR,cAAc,CAACoB,SAAS,IAAI;QAC1B,OAAOA,SAAS,CAACC,MAAV,CAAkBC,KAAD,IAAW;UAC/B,OAAOA,KAAK,CAACR,EAAN,IAAUA,EAAjB;QACD,CAFI,CAAP;MAID,CALa,CAAd;MAOAJ,OAAO,CAACC,GAAR,CAAYZ,WAAZ;IAGL,CA3BC,CA2BD,OAAMa,GAAN,EAAU;MACPF,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACJ,OAAhB;IACH;EACA,CA/BD;;EAiCF,oBACE;IAAK,KAAK,EAAE;MAACe,KAAK,EAAE,KAAR;MAAeC,MAAM,EAAE;IAAvB,CAAZ;IAAA,UACMzB,WAAW,CAAC0B,GAAZ,CAAgB,CAACC,MAAD,EAAQC,KAAR,KAAgB;MAC9B,oBAAO,QAAC,YAAD;QAA0B,IAAI,EAAED,MAAM,CAACE,IAAvC;QAA6C,EAAE,EAAEF,MAAM,CAACZ,EAAxD;QAA4D,SAAS,EAAEY,MAAM,CAACG,SAA9E;QAAyF,OAAO,EAAEH,MAAM,CAACI,OAAzG;QAAkH,KAAK,EAAEJ,MAAM,CAACK,KAAhI;QAAuI,QAAQ,EAAElB;MAAjJ,GAAmBc,KAAnB;QAAA;QAAA;QAAA;MAAA,QAAP;IACH,CAFC;EADN;IAAA;IAAA;IAAA;EAAA,QADF;AAOD;;GAlEQ7B,a;;KAAAA,a;AAoET,eAAeA,aAAf"},"metadata":{},"sourceType":"module"}